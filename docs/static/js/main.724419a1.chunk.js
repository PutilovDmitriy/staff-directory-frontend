(this["webpackJsonpstaff-directory-frontend"]=this["webpackJsonpstaff-directory-frontend"]||[]).push([[0],{111:function(e,t,a){e.exports=a(141)},121:function(e,t,a){},122:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),o=a(11),l=a.n(o),c=a(42),d=a(14),u=a(79),s=a(34),f=a(59);!function(e){e.ADD_WORKER="ADD_WORKER",e.UPDATE_WORKER="UPDATE_WORKER",e.DELETE_WORKER="DELETE_WORKER"}(n||(n={}));var m,g=function(e){return{type:n.ADD_WORKER,worker:e}},b=function(e,t){return{type:n.UPDATE_WORKER,worker:e,id:t}},p=function(e){return{type:n.DELETE_WORKER,id:e}},h=function(e){return{type:"CHANGE_ACTIVE_WORKER",id:e}},E="https://afternoon-wave-94253.herokuapp.com/staff/",v=function(e,t,a,n,r,i,o){return{id:e,FIO:t,position:a,birthday:n,gender:r,isFired:i,colleagues:o}},y=function(e,t){if(null!==e!==void 0&&void 0!==t){var a=t.find((function(t){return t.id===e}));return void 0!==a?a:{id:0,FIO:"",position:"",birthday:"",gender:"famela",isFired:!1,colleagues:[]}}},O=[{id:1,name:"\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440"},{id:2,name:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"},{id:3,name:"\u0418\u043d\u0436\u0435\u043d\u0435\u0440"},{id:4,name:"\u0421\u0442\u0430\u0436\u0451\u0440"},{id:5,name:"\u041e\u0445\u0440\u0430\u043d\u043d\u0438\u043a"},{id:6,name:"\u0423\u0431\u043e\u0440\u0449\u0438\u043a"},{id:7,name:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"},{id:8,name:"\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c"}],x=a(120);!function(e){e.FETCH_STAFF_BEGIN="FETCH_STAFF_BEGIN",e.FETCH_STAFF_SUCCESS="FETCH_STAFF_SUCCESS",e.FETCH_STAFF_FAILURE="FETCH_STAFF_FAILURE"}(m||(m={}));function k(){return function(e){return e({type:m.FETCH_STAFF_BEGIN}),fetch(E).then((function(e){return e.json()}),(function(t){return e(function(e){return{type:m.FETCH_STAFF_FAILURE,error:e}}(t))})).then((function(t){return e(function(e){return{type:m.FETCH_STAFF_SUCCESS,staff:e}}(t)),t}))}}var F={staff:[],loading:!1,error:null},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.FETCH_STAFF_BEGIN:return Object(f.a)({},e,{loading:!0,error:null});case m.FETCH_STAFF_SUCCESS:return Object(f.a)({},e,{loading:!1,staff:t.staff});case m.FETCH_STAFF_FAILURE:return Object(f.a)({},e,{loading:!1,error:t.error,staff:[]});case n.ADD_WORKER:return{staff:e.staff.concat(t.worker),loading:e.loading,error:e.error};case n.UPDATE_WORKER:var a=function(){for(var a=0;a<e.staff.length;a++)if(e.staff[a].id===t.id)return a;return-1},r=a(),i=e.staff.slice(0,r),o=e.staff.slice(r+1);return{staff:[].concat(Object(s.a)(i),[{id:t.worker.id,FIO:t.worker.FIO,position:t.worker.position,birthday:t.worker.birthday,gender:t.worker.gender,isFired:t.worker.isFired,colleagues:t.worker.colleagues}],Object(s.a)(o)),loading:e.loading,error:e.error};case n.DELETE_WORKER:var l=function(){for(var a=0;a<e.staff.length;a++)if(e.staff[a].id===t.id)return a},c=l();if(void 0!==c)return{staff:[].concat(Object(s.a)(e.staff.slice(0,c)),Object(s.a)(e.staff.slice(c+1))),loading:e.loading,error:e.error};default:return e}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_ACTIVE_WORKER":return t.id;default:return e}},C=Object(d.c)({staffReducer:j,activeWorkerReducer:W}),R=Object(d.d)(C,Object(d.a)(u.a)),S=(a(121),a(122),a(196)),w=a(183),T=a(184),D=a(185),_=a(80),A=a(81),I=a(91),N=a(82),H=a(93),L=a(83),K=function(e){function t(){return Object(_.a)(this,t),Object(I.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return i.a.createElement(L.Scrollbars,{style:{flex:"1 1 auto",width:"70%",margin:"10px 5px 5px 5px",boxShadow:"0px 4px 4px rgba(80, 20, 128, 0.5)"},autoHide:!0,autoHideTimeout:500,autoHideDuration:500,autoHeight:!0,autoHeightMin:480,autoHeightMax:480,renderTrackVertical:function(e){return i.a.createElement("div",Object.assign({},e,{style:{position:"absolute",height:"420px",width:"6px",right:0,bottom:"2px",top:"58px",borderRadius:"3px"}}))},renderThumbVertical:function(e){return i.a.createElement("div",Object.assign({},e,{style:{background:"#ccc",borderRadius:"3px"}}))}},this.props.children)}}]),t}(r.Component),U=a(4),P=a(206),G=a(180),M=a(181),z=Object(U.a)((function(e){return Object(P.a)({root:{"&:nth-of-type(even)":{backgroundColor:e.palette.background.default}}})}))(G.a),B=function(e){var t=e.id,a=e.FIO,n=e.position,i=e.birthday,o=e.gender,l=e.isFired,c=e.colleagues,d=e.activeWorker,u=e.changeActive,f=e.activeWorkerData,m=e.staffData,g=e.updateWorker;return r.createElement(z,{onClick:function(){if(null!==d)if(void 0===t||t===d||""===f.FIO||""===f.position||""===f.birthday){if(t!==d||""===f.FIO||""===f.position||""===f.birthday)return alert("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0443 \u0438\u043b\u0438 \u0443\u0434\u0430\u043b\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0443");u(null)}else u(t);else u(t)},style:{backgroundColor:t===d?"#e3f2fd":""}},r.createElement(M.a,{component:"th",scope:"row"},a),r.createElement(M.a,{align:"right"},n),r.createElement(M.a,{align:"right"},x(i,"dd/mm/yyyy")),r.createElement(M.a,{align:"right"},"female"===o?"\u041c":"\u0416"),r.createElement(M.a,{align:"right"},l?"\u0414\u0430":"\u041d\u0435\u0442"),r.createElement(M.a,{align:"right"},c.map((function(e){var r=m.find((function(t){return t.id==e}));if(void 0!==r)return"".concat(null===r||void 0===r?void 0:r.FIO,", ");!function(e){var r=c.indexOf(e);g(v(t,a,n,i,o,l,[].concat(Object(s.a)(c.slice(0,r)),Object(s.a)(c.slice(r+1)))),t)}(e)}))))},V=a(182),J=Object(U.a)((function(e){return Object(P.a)({head:{backgroundColor:"#f50057",color:e.palette.common.white,position:"sticky",top:0,boxShadow:"0px 4px 0px rgba(80, 20, 128, 0.3)"}})}))(M.a),Z=function(e){return r.createElement(V.a,null,r.createElement(G.a,null,r.createElement(J,null,"\u0424\u0418\u041e"),r.createElement(J,{align:"right"},"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c"),r.createElement(J,{align:"right"},"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f"),r.createElement(J,{align:"right"},"\u041f\u043e\u043b"),r.createElement(J,{align:"right"},"\u0423\u0432\u043e\u043b\u0435\u043d"),r.createElement(J,{align:"right"},"\u041a\u043e\u043b\u043b\u0435\u0433\u0438")))},$=Object(w.a)({table:{minWidth:700}}),q=function(e){var t=e.staffData,a=e.activeWorker,n=e.changeActive,r=e.activeWorkerData,o=e.updateWorker,l=$();return i.a.createElement(K,null,i.a.createElement(T.a,{className:l.table,"aria-label":"customized table"},i.a.createElement(Z,null),i.a.createElement(D.a,null,t?t.map((function(e){return i.a.createElement(B,{key:e.id,id:e.id,FIO:e.FIO,position:e.position,birthday:e.birthday,gender:e.gender,isFired:e.isFired,colleagues:e.colleagues,activeWorker:a,changeActive:n,activeWorkerData:r,staffData:t,updateWorker:o})})):"")))},Q=Object(c.b)((function(e){return{staffData:e.staffReducer.staff,activeWorker:e.activeWorkerReducer,activeWorkerData:y(e.activeWorkerReducer,e.staffReducer.staff)}}),(function(e){return{changeActive:Object(d.b)(h,e),updateWorker:Object(d.b)(b,e)}}))(q),X=a(186),Y=Object(w.a)((function(e){return Object(P.a)({root:{display:"flex",flex:"1 1 auto",width:"70%",height:480,margin:"10px 5px 5px 5px",boxShadow:"0px 4px 4px rgba(80, 20, 128, 0.5)",justifyContent:"center",alignItems:"center"}})})),ee=function(){var e=Y();return i.a.createElement("div",{className:e.root},i.a.createElement(X.a,null))},te=function(e){return e.loading?i.a.createElement(ee,null):i.a.createElement(Q,null)},ae=a(187),ne=a(188),re=a(143),ie=Object(w.a)((function(e){return Object(P.a)({root:{flexGrow:1},title:{flexGrow:1}})}));function oe(){var e=ie();return i.a.createElement("div",{className:e.root},i.a.createElement(ae.a,{position:"static"},i.a.createElement(ne.a,null,i.a.createElement(re.a,{variant:"h5",className:e.title},"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432"))))}var le=a(189),ce=a(88),de=a.n(ce),ue=a(87),se=a.n(ue),fe=Object(w.a)((function(e){return Object(P.a)({root:{flex:"0 1 auto",maxWidth:"300px",padding:0},button:{margin:e.spacing(1)}})})),me=function(e){var t=e.activeWorker,a=e.deleteWorker,n=e.addNewWorker,r=fe();return i.a.createElement("div",{className:r.root},i.a.createElement(le.a,{variant:"contained",color:"primary",className:r.button,endIcon:i.a.createElement(se.a,null),onClick:n},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),i.a.createElement(le.a,{variant:"contained",color:"secondary",disabled:null===t,className:r.button,startIcon:i.a.createElement(de.a,null),onClick:function(){null!==t&&void 0!==t&&a(t)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))},ge=a(38),be=a(142),pe=a(201),he=function(e){var t=e.FIO,a=e.handleChange,n=e.disabled;return i.a.createElement(pe.a,{className:"field",error:!1,id:"input-fio",label:"\u0424\u0418\u041e",value:t,helperText:"",variant:"outlined",onChange:a,disabled:n,autoFocus:!0})},Ee=a(204),ve=function(e){var t=e.position,a=e.handleChange,n=e.disabled;return i.a.createElement(pe.a,{className:"field",id:"outlined-select-currency",select:!0,label:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",value:t,onChange:a,helperText:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",variant:"outlined",disabled:n},O.map((function(e){return i.a.createElement(Ee.a,{key:e.id,value:e.name},e.name)})))},ye=a(90),Oe=a(15),xe=a(197),ke=function(e){var t=e.date,a=e.handleChange,n=e.disabled;return i.a.createElement(Oe.a,{utils:ye.a},i.a.createElement(xe.a,{className:"field",clearable:!0,variant:"inline",inputVariant:"outlined",format:"dd/MM/yyyy",placeholder:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",invalidDateMessage:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0434\u0430\u0442\u044b",label:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",value:t,disableFuture:!0,onChange:function(e){return a(e)},disabled:n}))},Fe=a(200),je=a(203),We=a(194),Ce=a(192),Re=a(193),Se=function(e){var t=e.gender,a=e.handleChange,n=e.disabled;return i.a.createElement(Ce.a,{component:"fieldset",disabled:n,className:"field"},i.a.createElement(Re.a,{component:"legend",style:{textAlign:"center",fontSize:"20px"}},"\u041f\u043e\u043b"),i.a.createElement(je.a,{row:!0,"aria-label":"gender",name:"gender",value:t,onChange:a},i.a.createElement(We.a,{value:"female",control:i.a.createElement(Fe.a,null),label:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"}),i.a.createElement(We.a,{value:"male",control:i.a.createElement(Fe.a,null),label:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"})))},we=a(195),Te=function(e){var t=e.isFired,a=e.handleChange,n=e.disabled;return i.a.createElement(We.a,{disabled:n,control:i.a.createElement(we.a,{checked:t,onChange:a,name:"checkedA"}),label:"\u0423\u0432\u043e\u043b\u0435\u043d",labelPlacement:"top"})},De=a(29),_e=a(190),Ae=a(198),Ie=Object(w.a)((function(e){return Object(P.a)({formControl:{margin:e.spacing(1),minWidth:120,maxWidth:220}})})),Ne=function(e){var t=e.colleaguesList,a=e.colleagues,n=e.handleChange,r=e.disabled,o=Ie(),l=Object(De.a)(),c={PaperProps:{style:{maxHeight:224,width:250}}};function d(e,t,a){return{fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}}return i.a.createElement(Ce.a,{className:o.formControl,disabled:r},i.a.createElement(Re.a,{component:"legend",style:{textAlign:"center"}},"\u041a\u043e\u043b\u043b\u0435\u0433\u0438"),i.a.createElement(Ae.a,{multiple:!0,displayEmpty:!0,value:a,onChange:n,input:i.a.createElement(_e.a,null),renderValue:function(e){return 0===e.length?i.a.createElement("em",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u043b\u043b\u0435\u0433"):e.map((function(e){var a=t.find((function(t){return t.id==e}));return"".concat(null===a||void 0===a?void 0:a.name,", ")}))},MenuProps:c},i.a.createElement(Ee.a,{disabled:!0,value:""},i.a.createElement("em",null,"\u041a\u043e\u043b\u043b\u0435\u0433\u0438")),t.map((function(e){return i.a.createElement(Ee.a,{key:e.id,value:e.id,style:d(e.id,a,l)},e.name)}))))},He=a(89),Le=Object(w.a)((function(e){return Object(P.a)({root:{display:"flex",flex:"0 1 auto",width:"300px",height:"480px",margin:"10px 5px 5px 5px",flexDirection:"column",justifyContent:"space-around",alignItems:"center",padding:"20px 5px",boxSizing:"border-box",border:"4px solid #3f51b5"},disable:{display:"flex",flex:"0 1 auto",width:"300px",height:"480px",margin:"10px 5px 5px 5px",flexDirection:"column",justifyContent:"space-around",alignItems:"center",padding:"20px 5px",boxSizing:"border-box",border:"4px solid #ccc"},formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2}})})),Ke=function(e){e.staffData;var t=e.activeWorker,a=e.colleaguesList,n=e.activeWorkerData,o=e.updateWorker,l=Le(),c=Object(r.useState)(""),d=Object(ge.a)(c,2),u=d[0],s=d[1],f=Object(r.useState)(""),m=Object(ge.a)(f,2),g=m[0],b=m[1],p=Object(r.useState)(new Date),h=Object(ge.a)(p,2),E=h[0],y=h[1],O=Object(r.useState)("female"),k=Object(ge.a)(O,2),F=k[0],j=k[1],W=Object(r.useState)(!1),C=Object(ge.a)(W,2),R=C[0],S=C[1],w=Object(r.useState)([]),T=Object(ge.a)(w,2),D=T[0],_=T[1];Object(r.useEffect)((function(){null!==t?(s(n.FIO),b(n.position),y(new Date(n.birthday||0)),j(n.gender),S(n.isFired),_(n.colleagues)):(s(""),b(""),y(null),j("female"),S(!1),_([]))}),[t]);var A=Object(He.isNull)(t);return i.a.createElement(be.a,{className:t?l.root:l.disable},i.a.createElement(he,{FIO:u,handleChange:function(e){s(e.target.value.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u0451\ ]/g,"")),null!==t&&void 0!==t&&o(v(t,e.target.value.replace(/[^A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u0451\ ]/g,""),g,String(x(E,"yyyy-mm-dd")),F,R,D),t)},disabled:A}),i.a.createElement(ve,{position:g,handleChange:function(e){b(e.target.value),null!==t&&void 0!==t&&o(v(t,u,e.target.value,String(x(E,"yyyy-mm-dd")),F,R,D),t)},disabled:A}),i.a.createElement(ke,{date:E,handleChange:function(e){y(e),null!==t&&void 0!==t&&o(v(t,u,g,String(x(e,"yyyy-mm-dd")),F,R,D),t)},disabled:A}),i.a.createElement(Se,{gender:F,handleChange:function(e){j(e.target.value),null!==t&&void 0!==t&&o(v(t,u,g,String(x(E,"yyyy-mm-dd")),e.target.value,R,D),t)},disabled:A}),i.a.createElement(Te,{isFired:R,handleChange:function(e){S(e.target.checked),null!==t&&void 0!==t&&o(v(t,u,g,String(x(E,"yyyy-mm-dd")),F,e.target.checked,D),t)},disabled:A}),i.a.createElement(Ne,{colleagues:D,colleaguesList:a,handleChange:function(e){_(e.target.value),null!==t&&void 0!==t&&o(v(t,u,g,String(x(E,"yyyy-mm-dd")),F,R,e.target.value),t)},disabled:A}))},Ue=Object(w.a)((function(){return Object(P.a)({home:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%"},blocks:{display:"flex",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}})})),Pe=function(e){var t=e.staffData,a=e.getStaff,n=e.activeWorker,o=e.changeActive,l=e.addWorker,c=e.removeWorker,d=e.colleaguesList,u=e.loading,s=e.activeWorkerData,f=e.updateWorker,m=Ue(),g=Object(r.useCallback)((function(){a()}),[a]);Object(r.useEffect)((function(){g()}),[g]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(oe,null),i.a.createElement(S.a,{className:m.home},i.a.createElement(me,{activeWorker:n,deleteWorker:function(e){c(e),o(null),fetch(E+e,{method:"DELETE"})},addNewWorker:function(){var e={id:t[t.length-1].id+1,FIO:"",position:"",birthday:"",gender:"female",isFired:!1,colleagues:[]};l(e),fetch(E,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}),o(e.id)}}),i.a.createElement("div",{className:m.blocks},i.a.createElement(te,{loading:u}),i.a.createElement(Ke,{staffData:t,colleaguesList:d,activeWorker:n,activeWorkerData:s,updateWorker:function(e,t){f(e,t),fetch(E+t,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({id:e.id,FIO:e.FIO,position:e.position,birthday:e.birthday,gender:e.gender,isFired:e.isFired,colleagues:e.colleagues})})}}))))},Ge=function(e,t){var a=[];return e.map((function(e){t!==e.id&&(a=a.concat({id:e.id,name:e.FIO}))})),a},Me=Object(c.b)((function(e){return{staffData:e.staffReducer.staff,loading:e.staffReducer.loading,activeWorker:e.activeWorkerReducer,activeWorkerData:y(e.activeWorkerReducer,e.staffReducer.staff),colleaguesList:Ge(e.staffReducer.staff,e.activeWorkerReducer)}}),(function(e){return{getStaff:Object(d.b)(k,e),changeActive:Object(d.b)(h,e),addWorker:Object(d.b)(g,e),removeWorker:Object(d.b)(p,e),updateWorker:Object(d.b)(b,e)}}))(Pe),ze=function(){return i.a.createElement(Me,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(c.a,{store:R},i.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[111,1,2]]]);
//# sourceMappingURL=main.724419a1.chunk.js.map